!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./src/canvas.js")}({"./src/button.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function e(t,i,n,s,a,o,r,l,c){var u=this,h=arguments.length>9&&void 0!==arguments[9]&&arguments[9];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=i,this.y=n,this.halfX=i,this.halfY=n,this.fontSize=o,this.str=r,this.game=t,this.w=s,this.h=a,this.offX=0,this.offY=0,this.backColor="black",this.fontColor="white",this.cb=c,this.autoDestroy=h,this.onOver=function(e){u.game.utils.mouseCollision(u,{x:e.clientX,y:e.clientY})?(u.backColor="brown",u.draw()):(u.backColor="black",u.draw())},this.click=function(e){u.game.utils.mouseCollision(u,{x:e.clientX,y:e.clientY})&&(u.cb(),h&&u.destroy())},this.game.canvas.addEventListener("mousemove",this.onOver),this.game.canvas.addEventListener("click",this.click),this.draw()}return n(e,[{key:"draw",value:function(){var e=this.game,t=(e.canvas,e.c);t.font=this.fontSize+"pt Tahoma";var i=e.utils.textSize(t,this.str);this.offX=this.w-i[0],this.offY=this.h-i[1],this.x=this.halfX-(i[0]+this.offX)/2,this.y=this.halfY-(i[1]+this.offY)/2,t.beginPath(),t.fillStyle=this.backColor,t.fillRect(this.x,this.y,i[0]+this.offX,i[1]+this.offY),t.closePath(),t.beginPath(),t.fillStyle=this.fontColor,t.fillText(this.str,this.halfX-i[0]/2,this.halfY+i[1]/2),t.closePath()}},{key:"getTop",value:function(){return this.halfY}},{key:"getBottom",value:function(){return this.getTop()+this.h}},{key:"destroy",value:function(){console.log("destroying"),this.game.canvas.removeEventListener("mousemove",this.onOver),this.game.canvas.removeEventListener("click",this.click)}}]),e}();e.exports=s},"./src/canvas.js":function(e,t,i){"use strict";var n=l(i("./src/toolbar.js")),s=(l(i("./src/gameListeners.js")),l(i("./src/playerListeners.js")),l(i("./src/objects.js"))),a=l(i("./src/json/tiles.json")),o=l(i("./src/game.js")),r=l(i("./src/tilesManager.js"));function l(e){return e&&e.__esModule?e:{default:e}}var c=document.getElementById("game"),u=document.getElementById("canvas");u.oncontextmenu=function(e){return e.preventDefault()},u.width=innerWidth-50,u.height=innerHeight-50;var h=new o.default(u),f=h.c;for(var d in h.assets.tiles=a.default,h.select.tile=h.assets.tiles.landscape,h.cfg.scale=64,h.cfg.cols=32,h.cfg.rows=32,h.translate.y=-h.cfg.rows*h.cfg.scale+u.height,h.assets.tiles)h.utils.loadTiles(h.assets.tiles[d]);h.Player=new s.default.Player(3,27,"James",h);var m=(0,n.default)(h);c.append(m),m=null,h.init=function(){if(h.events.start(),h.map=i("./src/json/map.json"),h.map)for(var e=0;e<h.map.length;e++)for(var t=0;t<h.map[0].length;t++){var n=h.map[e][t],s=h.utils.numberToClass(n);h.map[e][t]=new s(t,e,h),"Wall"===h.map[e][t].type&&r.default.getValue(h,t,e,!1,!1)}else{h.map=[];for(var a=0;a<h.cfg.rows;a++){h.map[a]=[];for(var o=0;o<h.cfg.cols;o++)h.map[a][o]=new h.Objects.Block(o,a,h)}}console.log("Lets go !")};var y=void 0,g=Date.now(),p=void 0,v=0,k=0,w=(setInterval(function(){k=v,v=0},1e3),h.cfg.cols*h.cfg.scale),b=h.cfg.rows*h.cfg.scale;u.width,u.height;h.animate=function(){h.playing[0]&&requestAnimationFrame(h.animate),y=Date.now(),(p=y-g)>1e3/60&&(g=y-p%(1e3/60),h.update[h.mode].update(),v++,f.beginPath(),f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(u.width-80,0,100,40),f.fillStyle="white",f.font="11px Arial",f.fillText("ZOOM: x"+(h.cfg.scale/64).toFixed(2),u.width-75,15),f.fillText("FPS: "+k,u.width-75,30),f.rect(0,0,u.width,u.height),f.stroke(),f.closePath())};var x=new i("./src/button.js"),j=[],O=new x(h,u.width/2,u.height/3,250,80,30,"Story","test1",function(){h.init(),setTimeout(function(){h.playing=[!0,!0],h.cfg.updateAll=!0,h.update[h.mode].mute(),h.mode="play",h.update[h.mode].listen(),h.animate(),j.forEach(function(e){return e.destroy()})},200)}),T=new x(h,u.width/2,O.getBottom()+10,250,80,30,"Map Maker","test2",function(){h.init(),setTimeout(function(){h.playing=[!0,!0],h.cfg.updateAll=!0,h.update[h.mode].mute(),h.mode="edit",h.update[h.mode].listen(),h.animate(),j.forEach(function(e){return e.destroy()})},200)}),E=new x(h,u.width/2,T.getBottom()+10,250,80,30,"Quit","test3",function(){});j=[O,T,E]},"./src/engine.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e.exports=function(){function e(t,i,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.c=t,this.cols=i,this.rows=n,this.cells=[]}return n(e,[{key:"create",value:function(e,t,i){this.rows=e,this.cols=t,this.scale=i,this.clear();for(var n=0;n<this.rows;n++){this.cells[n]=[];for(var s=0;s<this.cols;s++)this.cells[n][s]=[]}}},{key:"clear",value:function(){this.cells=[]}},{key:"insert",value:function(e){for(var t=e.getLeft(!0),i=e.getTop(!0),n=e.getRight(!0),s=e.getBottom(!0),a=this.scale,o=Math.floor(t/a),r=Math.ceil(n/a),l=Math.floor(i/a),c=Math.ceil(s/a),u=l;u<c;u++)for(var h=o;h<r;h++)this.makeCell(u,h)&&this.cells[u][h].push(e)}},{key:"makeCell",value:function(e,t){var i=this.cells;return!!i[e]&&(i[e][t]||(this.cells[e][t]=[]),!0)}},{key:"isColliding",value:function(e,t){var i=e.getLeft(!0),n=e.getRight(!0),s=e.getTop(!0),a=e.getBottom(!0),o=t.getLeft(!0),r=t.getRight(!0),l=t.getTop(!0),c=t.getBottom(!0);return i<r&&n>o&&s<c&&a>l}},{key:"checkCells",value:function(){var e=this;this.cells.forEach(function(t){t.forEach(function(t){!t||t.length<=1||e.testCellEntities(t)})})}},{key:"testCellEntities",value:function(e){var t=this,i=e.length;e.forEach(function(n,s){for(var a=s+1;a<i;a++){var o=e[a];t.isColliding(n,o)&&n!==o&&t.resolve(n,o)}})}},{key:"resolve",value:function(e,t){var i=e.getHalfWidth(!0)-t.getHalfWidth(!0),n=e.getHalfHeight(!0)-t.getHalfHeight(!0),s=e.w/2+t.w/2,a=e.h/2+t.h/2,o="",r=i<0&&n<0;if(Math.abs(i)<s&&Math.abs(n)<a){var l=s-Math.abs(i),c=a-Math.abs(n);l>c?o=n>0?0:1:l<c?o=i>0?2:3:r||i!==n?!r&&i<n?o=0:!r&&i>n?o=1:r&&i===n&&(o=1):o=0}e.resolve(t,["TOP","BOTTOM","LEFT","RIGHT","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT"][o]),t.resolve(e,["BOTTOM","TOP","RIGHT","LEFT","BOTTOM_RIGHT","BOTTOM_LEFT","TOP_RIGHT","TOP_LEFT"][o])}}]),e}()},"./src/events.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.list="ontouchstart"in window?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup","keyup","keydown","wheel","mouseleave"]}return n(e,[{key:"start",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.addEventListener(t,e,!1)}),console.log("start")}},{key:"end",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.removeEventListener(t,e,!1)}),console.log("end")}},{key:"handleEvent",value:function(e){var t="on"+e.type;if("function"==typeof this[t])return e.preventDefault(),this[t](e)}},{key:"onkeydown",value:function(e){var t=this.game;e.preventDefault(),t.playing[0]&&!t.editor&&t.Player.keys.hasOwnProperty(e.key)&&(t.Player.keys[e.key]=!0)}},{key:"onkeyup",value:function(e){var t=this.game;e.preventDefault(),t.playing[0]&&!t.editor&&t.Player.keys.hasOwnProperty(e.key)&&(t.Player.keys[e.key]=!1)}},{key:"onmousedown",value:function(e){var t=this.game;if(t.playing[0]&&t.editor){switch(e.button){case 0:t.mouse.click="left",t.mouse.left=!0;break;case 1:t.mouse.click="middle",t.mouse.middle={click:!0,x:t.mouse.x,y:t.mouse.y};break;case 2:t.mouse.click="right",t.mouse.right=!0}t.checkForClicks()}}},{key:"onmouseup",value:function(e){var t=this.game;if(t.playing[0]&&t.editor)switch(t.mouse.click=null,e.button){case 0:t.mouse.left=!1;break;case 1:t.mouse.middle={click:!1,x:null,y:null};break;case 2:t.mouse.right=!1}}},{key:"onwheel",value:function(e){var t=this.game;if(e.preventDefault(),t.playing[0]&&t.editor){var i=t.mouse,n=t.translate.x,s=t.translate.y,a=t.cfg.scale,o=e.wheelDelta>0?4:-4;8<=a+o&&a+o<=96&&(t.translate.x=i.x-(i.x-n)/a*(a+o),t.translate.y=i.y-(i.y-s)/a*(a+o),t.cfg.scale+=o,t.cfg.updateAll=!0)}}},{key:"onmousemove",value:function(e){var t=this.game;if(t.playing[0]&&t.editor){var i=t.mouse,n=t.cfg.scale,s=t.translate.x,a=t.translate.y;t.mouse.x=e.clientX,t.mouse.y=e.clientY,t.mouse.gridX=Math.floor((i.x-s)/n),t.mouse.gridY=Math.floor((i.y-a)/n),(i.left||i.right||i.middle.click)&&(i.middle.click&&t.checkForClicks(),i.gridX===i.last.gridX&&i.gridY===i.last.gridY&&i.click===i.last.click||t.checkForClicks())}}},{key:"onmouseleave",value:function(e){var t=this.game;t.playing[0]&&t.editor&&(t.mouse.left=!1,t.mouse.right=!1,t.mouse.middle={click:!1,x:null,y:null})}},{key:"ontouchstart",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchmove",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchend",value:function(e){this.game}}]),e}()},"./src/game.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=c(i("./src/events.js")),a=c(i("./src/utils.js")),o=c(i("./src/engine.js")),r=c(i("./src/update/play.js")),l=c(i("./src/update/edit.js"));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.c=t.getContext("2d"),this.map=null,this.Player=void 0,this.Objects=i("./src/objects.js"),this.utils=new a.default(this),this.cfg={name:"default",cols:null,rows:null,scale:null,updateArr:[],updateAll:!1,gravity:.98},this.mode="edit",this.Engine=new o.default(this.c,this.cfg.cols,this.cfg.rows,this.cfg.scale),this.assets={tiles:{},textures:{}},this.translate={x:0,y:0},this.playing=[!1,!1],this.select={color:"blue",brushSize:0,block:this.Objects.Wall,tile:this.assets.tiles.landscape},this.mouse={x:null,y:null,gridX:0,gridY:0,left:!1,right:!1,click:null,middle:{click:!1,x:null,y:null},last:{gridX:void 0,gridY:void 0,click:"nop"}},this.message={game:this,list:[],fontSize:35,offX:200,offY:100,error:function(e){var t=this.game,i=t.c,n=t.canvas;this.fontSize;e="Vous êtes mort !",i.font=this.fontSize+"pt Tahoma";var s=[i.measureText(e).width,.7*parseInt(i.font.match(/\d+/),10)];console.log(s);var a=i.measureText(e).width;i.beginPath(),i.fillStyle="black",i.fillRect(n.width/2-(s[0]+this.offX)/2,n.height/2-(s[1]+this.offY)/2,a+this.offX,s[1]+this.offY),i.closePath(),i.beginPath(),i.fillStyle="red",i.fillText(e,n.width/2-s[0]/2,n.height/2+s[1]/2),i.closePath()}},this.events=new s.default(this),this.update={play:new r.default(this),edit:new l.default(this)}}return n(e,[{key:"menu",value:function(){i("./src/menu.js")(this)}},{key:"start",value:function(){}},{key:"pause",value:function(){}},{key:"updateMap",value:function(){if(this.cfg.updateAll||!this.editor){for(var e=this.cfg.scale,t=this.canvas,i=this.translate.x,n=this.translate.y,s=Math.ceil(t.width/e),a=Math.ceil(t.height/e),o=Math.floor(i/e*-1)>0?Math.floor(i/e*-1):0,r=Math.floor(n/e*-1)>0?Math.floor(n/e*-1):0,l=r;l<a+r+1;l++)for(var c=o;c<s+o+1;c++)this.map[l]&&this.map[l][c]&&(!this.editor&&this.map[l][c].empty||(this.map[l][c].update(),this.map[l][c].draw(),this.map[l][c].collision&&this.Engine.insert(this.map[l][c])));this.cfg.updateAll=!1}else if(this.cfg.updateArr.length>0){for(var u=0;u<this.cfg.updateArr.length;u++)this.map[this.cfg.updateArr[u].y][this.cfg.updateArr[u].x].draw(this);this.cfg.updateArr=[]}}}]),e}();u.prototype.Camera=function(){if(!this.editor){var e=this.canvas,t=this.Player,i=this.cfg.scale,n=this.cfg.cols*i,s=this.cfg.rows*i,a=n-e.width,o=s-e.height,r=e.width<n,l=e.height<s,c=-t.getHalfWidth()+e.width/2,u=-t.getHalfHeight()+e.height/2;r||(c=e.width/2-n/2),l||(u=e.height/2-s/2),r&&t.getHalfWidth()<=e.width/2?c=0:r&&t.getHalfWidth()>=n-e.width/2&&(c=-a),l&&t.getHalfHeight()<=e.height/2?u=0:l&&t.getHalfHeight()>=s-e.height/2&&(u=-o),t.isDead?this.translate.x==c&&this.translate.y==u?t.spawn():(this.translate.x=this.utils.lerp(this.translate.x,c,.2),this.translate.y=this.utils.lerp(this.translate.y,u,.2)):(this.translate.x=c,this.translate.y=u)}},e.exports=u},"./src/gameListeners.js":function(e,t,i){"use strict";e.exports=function(e,t){e.addEventListener("mousemove",function(e){t.playing[0]&&t.editor&&(t.mouse.x=e.clientX,t.mouse.y=e.clientY,t.mouse.gridX=Math.floor((t.mouse.x-t.translate.x)/t.cfg.scale),t.mouse.gridY=Math.floor((t.mouse.y-t.translate.y)/t.cfg.scale),(t.mouse.left||t.mouse.right||t.mouse.middle.click)&&(t.mouse.middle.click&&t.checkForClicks(),t.mouse.gridX===t.mouse.last.gridX&&t.mouse.gridY===t.mouse.last.gridY&&t.mouse.click===t.mouse.last.click||t.checkForClicks()))}),e.addEventListener("mouseleave",function(e){t.playing[0]&&t.editor&&(t.mouse.left=!1,t.mouse.right=!1,t.mouse.middle={click:!1,x:null,y:null})}),e.addEventListener("wheel",function(e){if(t.playing[0]&&t.editor){var i=e.wheelDelta>0?4:-4;8<=t.cfg.scale+i&&t.cfg.scale+i<=96&&(t.translate.x=t.mouse.x-(t.mouse.x-t.translate.x)/t.cfg.scale*(t.cfg.scale+i),t.translate.y=t.mouse.y-(t.mouse.y-t.translate.y)/t.cfg.scale*(t.cfg.scale+i),t.cfg.scale+=i,t.cfg.updateAll=!0)}}),e.addEventListener("mousedown",function(e){if(t.playing[0]&&t.editor){switch(e.preventDefault(),e.button){case 0:t.mouse.click="left",t.mouse.left=!0;break;case 1:t.mouse.click="middle",t.mouse.middle={click:!0,x:t.mouse.x,y:t.mouse.y};break;case 2:t.mouse.click="right",t.mouse.right=!0}t.checkForClicks()}}),e.addEventListener("mouseup",function(e){if(t.playing[0]&&t.editor)switch(e.preventDefault(),t.mouse.click=null,e.button){case 0:t.mouse.left=!1;break;case 1:t.mouse.middle={click:!1,x:null,y:null};break;case 2:t.mouse.right=!1}})}},"./src/json/map.json":function(e){e.exports=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,1,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,1],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},"./src/json/tiles.json":function(e){e.exports={landscape:{name:"landscape",w:8,h:6,l:47,iX:10,iY:10,size:64,url:"https://cdn.glitch.com/e683167b-6e53-40d8-9a05-e24a714a856d%2FtileMap.png?1551459491160"}}},"./src/menu.js":function(e,t,i){"use strict";e.exports=function(e){var t=e.canvas;e.c;this.game=e,this.evtList=["mousemove","mouseclick"],e.utils.events(evtList),evt.start(),onmousemove=function(e){var i=new CustomEvent("menuOver",{mouse:{x:e.clientX,y:e.clienty}});t.dispatchEvent(i)},onmouseclick=function(e){var i=new CustomEvent("menuOver",{mouse:{x:e.clientX,y:e.clienty}});t.dispatchEvent(i)}}},"./src/objects.js":function(e,t,i){"use strict";var n,s=i("./src/tilesManager.js");(n=s)&&n.__esModule;e.exports={Block:i("./src/objects/block.js"),Wall:i("./src/objects/wall.js"),Player:i("./src/objects/player.js"),BouncingBox:i("./src/objects/bouncingBox.js"),Spike:i("./src/objects/spike.js")}},"./src/objects/block.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e.exports=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="Block",this.game=n,this.x=t,this.y=i,this.w=n.cfg.scale,this.h=n.cfg.scale,this.dx=0,this.dy=0,this.color="white",this.empty=!0,this.collision=!1}return n(e,[{key:"getLeft",value:function(e){var t=this.game.cfg.scale;return this.x*t+(e?this.dx:0)}},{key:"getTop",value:function(e){var t=this.game.cfg.scale;return this.y*t+(t-this.h)+(e?this.dy:0)}},{key:"getRight",value:function(e){return this.getLeft(e)+this.w}},{key:"getBottom",value:function(e){return this.getTop(e)+this.h}},{key:"getHalfWidth",value:function(e){return this.getRight(e)-this.w/2}},{key:"getHalfHeight",value:function(e){return this.getBottom(e)-this.h/2}},{key:"draw",value:function(){var e=this.game.c,t=this.game.cfg.scale,i=this.x*t,n=this.y*t+(t-this.h);e.beginPath(),e.rect(i,n,this.w,this.h),e.fillStyle=this.color,e.stroke(),e.fill(),e.closePath()}},{key:"update",value:function(){var e=this.game.cfg.scale;this.w=e,this.h=e}},{key:"normalCollision",value:function(e,t){this.h,this.h;var i=e.dx<0,n=e.dx>0,s=e.dy<0,a=e.dy>0,o="LEFT"===t,r="RIGHT"===t,l="TOP"===t,c="BOTTOM"===t,u=this.x,h=this.y,f=this.game.utils;a?(l&&(e.isOnFloor=!0,e.hasBounced=!1,e.y=this.getTop()-e.h,e.dy=0),o&&(f.catchBlockCollision(u-1,h)?(e.isOnFloor=!0,e.hasBounced=!1,e.y=this.getTop()-e.h,e.dy=0):(e.x=this.getLeft()-e.w,e.dx=0)),r&&(f.catchBlockCollision(u+1,h)?(e.isOnFloor=!0,e.hasBounced=!1,e.y=this.getTop()-e.h,e.dy=0):(e.x=this.getRight(),e.dx=0))):s?(c&&(e.y=this.getBottom(),e.dy=0),o&&(f.catchBlockCollision(u-1,h)?(e.y=this.getBottom(),e.dy=0):(e.x=this.getLeft()-e.w,e.dx=0)),r&&(f.catchBlockCollision(u+1,h)?(e.y=this.getBottom(),e.dy=0):(e.x=this.getRight(),e.dx=0))):i&&o?(e.x=this.getLeft()-e.w,e.dx=0):n&&r&&(e.x=this.getRight(),e.dx=0)}}]),e}()},"./src/objects/bouncingBox.js":function(e,t,i){"use strict";var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i("./src/objects/block.js"),o=(n=a)&&n.__esModule?n:{default:n};e.exports=function(e){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return s.h=n.cfg.scale/2,s.type="BouncingBox",s.color="purple",s.empty=!1,s.collision=!0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),s(t,[{key:"update",value:function(){this.h=this.game.cfg.scale}},{key:"resolve",value:function(e,t){if("Player"==e.type){var i=this.h/2|0;switch(t){case"TOP":e.dy<-i?(e.dy=e.dy*(e.hasBounced?-.9:-1.1)|0,e.hasBounced=!0):e.dy<15?(e.y=this.getTop()-e.h,e.dy=0,e.isOnFloor=!0):(e.dy=e.dy*(e.hasBounced?-.9:-1.1)|0,e.hasBounced=!0);break;case"BOTTOM":e.dy>=i?(e.dy=e.dy*(e.hasBounced?-.9:-1.1)|0,e.hasBounced=!0):e.dy<15?(e.y=this.getBottom(),e.dy=0,e.isOnFloor=!0):(e.dy=e.dy*(e.hasBounced?-.9:-1.1)|0,e.hasBounced=!0);break;case"LEFT":e.dx<-i?n(this,e,!0,!1)&&(e.dx=e.dx*(e.hasBounced?-.9:-1.1),e.hasBounced=!0):n(this,e,!0,!1)&&(e.dx=e.dx*(e.hasBounced?-.9:-1.1),e.x=this.getLeft()-e.w,e.hasBounced=!0);break;case"RIGHT":e.dx>=i?n(this,e,!0,!1)&&(e.dx=e.dx*(e.hasBounced?-.9:-1.1),e.x=this.getLeft()-e.w,e.hasBounced=!0):n(this,e,!0,!1)&&(e.dx=e.dx*(e.hasBounced?-.9:-1.1),e.x=this.getRight(),e.hasBounced=!0)}}function n(e,t,i,n){var s=e.getLeft(),a=e.getRight(),o=e.getTop(),r=e.getBottom(),l=t.getLeft(i),c=t.getRight(i),u=t.getTop(n),h=t.getBottom(n);return s<c&&a>l&&o<h&&r>u}}}]),t}()},"./src/objects/player.js":function(e,t,i){"use strict";var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i("./src/objects/block.js"),o=(n=a)&&n.__esModule?n:{default:n};e.exports=function(e){function t(e,i,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s));return a.type="Player",a.color="brown",a.name=n,a.x=e*a.game.cfg.scale,a.y=i*a.game.cfg.scale,a.h=100,a.w=50,a.respawn=[a.x,a.y],a.accel=1,a.maxSpeed=10,a.jumpForce=0,a.mass=1,a.gravity=.98,a.canJump=!0,a.isOnFloor=!1,a.isDead=!1,a.hasBounced=!1,a.keys={ArrowLeft:!1,ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,SpaceDown:!1,SpaceBarre:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),s(t,[{key:"getLeft",value:function(e){return this.x+(e?this.dx:0)}},{key:"getRight",value:function(e){return this.x+this.w+(e?this.dx:0)}},{key:"getTop",value:function(e){return this.y+(e?this.dy:0)}},{key:"getBottom",value:function(e){return this.y+this.h+(e?this.dy:0)}},{key:"getHalfWidth",value:function(e){return this.x+this.w/2+(e?this.dx:0)}},{key:"getHalfHeight",value:function(e){return this.y+this.h/2+(e?this.dy:0)}},{key:"jump",value:function(){this.isOnFloor&&this.canJump&&(this.dy=-17,this.isOnFloor=!1,this.canJump=!1)}},{key:"die",value:function(){this.x=this.respawn[0],this.y=this.respawn[1],this.dx=0,this.dy=0,this.isOnFloor=!1,this.hasBounced=!1,this.isDead=!0}},{key:"spawn",value:function(){this.isDead=!1}},{key:"draw",value:function(){if(!this.isDead){var e=this.game.c;e.beginPath(),e.rect(this.x,this.y,this.w,this.h),e.fillStyle=this.color,e.fill(),e.closePath()}}},{key:"actions",value:function(){if(this.isIdle=!0,!this.isDead&&(this.keys.ArrowUp||(this.canJump=!0),this.keys.ArrowLeft&&(this.dx=Math.max(this.dx-this.accel,-this.maxSpeed),this.isIdle=!1),this.keys.ArrowRight&&(this.dx=Math.min(this.dx+this.accel,this.maxSpeed),this.isIdle=!1),this.keys.ArrowUp&&this.jump(),this.dy+=.98,this.isIdle)){var e=this.isOnFloor?.3:.07;this.dx=this.game.utils.lerp(this.dx,0,e)}}},{key:"resolve",value:function(e,t){}},{key:"update",value:function(){if(!this.isDead){this.dy>0&&(this.isOnFloor=!1),this.dy>0?this.dy=this.dy>63?63:this.dy:this.dy<0&&(this.dy=this.dy<-63?-63:this.dy),this.dx>0?this.dx=this.dx>63?63:this.dx:this.dx<0&&(this.dx=this.dx<-63?-63:this.dx);var e=this.game.cfg.scale,t=this.game.cfg.cols,i=this.game.cfg.rows;this.getLeft(!0)<0?(this.x=0,this.dx=0):this.getRight(!0)>t*e&&(this.x=t*e-this.w,this.dx=0),this.getTop(!0)<0?(this.y=0,this.dy=0):this.getBottom(!0)>i*e&&(this.y=i*e-this.h,this.isOnFloor=!0,this.dy=0),this.x+=this.dx,this.y+=this.dy,this.draw()}}}]),t}()},"./src/objects/spike.js":function(e,t,i){"use strict";var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i("./src/objects/block.js"),o=(n=a)&&n.__esModule?n:{default:n};e.exports=function(e){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return s.h=n.cfg.scale/2,s.type="Spike",s.color="gray",s.empty=!1,s.collision=!0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),s(t,[{key:"update",value:function(){this.h=this.game.cfg.scale/2}},{key:"resolve",value:function(e,t){if("Player"==e.type)return"TOP"===t?e.die():void this.normalCollision(e,t)}}]),t}()},"./src/objects/wall.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=o(i("./src/tilesManager.js")),a=o(i("./src/objects/block.js"));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return s.type="Wall",s.tile={name:s.game.select.tile.name},s.empty=!1,s.collision=!0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),n(t,[{key:"draw",value:function(){var e=this.game,t=e.c;this.tile&&(t.beginPath(),t.drawImage(e.assets.tiles[this.tile.name].img,this.tile.x,this.tile.y,e.assets.tiles[this.tile.name].size,e.assets.tiles[this.tile.name].size,this.x*e.cfg.scale,this.y*e.cfg.scale,e.cfg.scale,e.cfg.scale),t.closePath())}},{key:"update",value:function(){var e=this.game;if(this.w=e.cfg.scale,this.h=e.cfg.scale,this.tile){this.collision=this.tile.value<255;var t=s.default.getID(this.tile.value);this.tile.id=0===t?0:t-1;var i=this.tile.id%e.assets.tiles[this.tile.name].w,n=Math.floor(this.tile.id/e.assets.tiles[this.tile.name].w);this.tile.x=i*e.assets.tiles[this.tile.name].size+i*e.assets.tiles[this.tile.name].iX,this.tile.y=n*e.assets.tiles[this.tile.name].size+n*e.assets.tiles[this.tile.name].iY}}},{key:"resolve",value:function(e,t){"Player"==e.type&&this.normalCollision(e,t)}}]),t}()},"./src/playerListeners.js":function(e,t,i){"use strict";e.exports=function(e,t){document.addEventListener("keydown",function(i){t.playing[0]&&!t.editor&&e.keys.hasOwnProperty(i.key)&&(i.preventDefault(),e.keys[i.key]=!0)}),document.addEventListener("keyup",function(i){t.playing[0]&&!t.editor&&e.keys.hasOwnProperty(i.key)&&(i.preventDefault(),e.keys[i.key]=!1)})}},"./src/tilesManager.js":function(e,t,i){"use strict";e.exports={getID:function(e){return{0:1,2:2,8:3,10:4,11:5,16:6,18:7,22:8,24:9,26:10,27:11,30:12,31:13,64:14,66:15,72:16,74:17,75:18,80:19,82:20,86:21,88:22,90:23,91:24,94:25,95:26,104:27,106:28,107:29,120:30,122:31,123:32,126:33,127:34,208:35,210:36,214:37,216:38,218:39,219:40,222:41,223:42,248:43,250:44,251:45,254:46,255:47}[e]},getValue:function(e,t,i,n,s){return function e(t,i,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o=0;var r=[!1,!1,!1,!1];function l(i,n,s,l){t.map[n]&&t.map[n][i]&&"Wall"!=t.map[n][i].type||t.map[n]&&0===t.map[n][i]||t.map[n]&&t.map[n][i]&&t.map[n][i].empty||(o+=s,l>=0&&(r[l]=!0),a||!t.map[n]||t.map[n]&&!t.map[n][i]||(e(t,i,n,!1,!0),t.cfg.updateArr.push({x:i,y:n})))}l(i,n-1,2,0);l(i,n+1,64,1);l(i-1,n,8,2);l(i+1,n,16,3);r[0]&&r[2]&&l(i-1,n-1,1);r[0]&&r[3]&&l(i+1,n-1,4);r[1]&&r[2]&&l(i-1,n+1,32);r[1]&&r[3]&&l(i+1,n+1,128);s?t.map[n][i].tile=null:t.map[n][i].tile.value=o;t.map[n][i].update(t);return[]}(e,t,i,n,s)}}},"./src/toolbar.js":function(e,t,i){"use strict";e.exports=function(e){var t=document.createElement("form"),i=document.createElement("button");i.innerHTML="PLAY",i.onclick=function(t){t.preventDefault(),e.playing[1]?e.playing[0]?(t.target.innerHTML="PLAY",e.playing[0]=!1):e.playing[0]||(e.playing[0]=!0,e.animate(),t.target.innerHTML="PAUSE"):(e.playing[0]=!0,e.playing[1]=!0,e.cfg.updateAll=!0,e.init(),setTimeout(function(){e.animate()},500),t.target.innerHTML="PAUSE")};var n=document.createElement("input");n.type="color",n.onchange=function(t){e.select.color=t.target.value};var s=document.createElement("button");return s.innerHTML="SAVE",s.onclick=function(t){t.preventDefault();var i,n,s="[";e.map.forEach(function(t,i){s+="[",t.forEach(function(e,i){e.empty?s+="0"+(i<t.length-1?", ":""):s+=JSON.stringify(function(e){var t=Object.create(e);t.type=e.type,e.tile&&(t.tile={},t.tile.name=e.tile.name,t.tile.value=e.tile.value);return t}(e))+(i<t.length-1?", ":"")}),s+=i<e.map.length-1?"], ":"]"}),i=s+="]",n=document.createElement("input"),document.body.appendChild(n),n.setAttribute("value",i),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("The map has been copied on your clipboard")},t.append(i),t.append(n),t.append(s),t}},"./src/update/edit.js":function(e,t,i){"use strict";var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i("./src/tilesManager.js"),o=(n=a)&&n.__esModule?n:{default:n};function r(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.list="ontouchstart"in window?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup","wheel","mouseleave"]}return s(e,[{key:"update",value:function(){var e=this.game;if(e.playing[1]){var t=e.cfg.scale,i=e.canvas,n=e.translate.x,s=e.translate.y,a=(e.Player,e.Engine,e.c),o=e.cfg.updateAll,r=e.cfg.updateArr;if(o&&a.clearRect(0,0,i.width,i.height),a.save(),a.translate(n,s),o){for(var l=Math.ceil(i.width/t),c=Math.ceil(i.height/t),u=Math.floor(n/t*-1)>0?Math.floor(n/t*-1):0,h=Math.floor(s/t*-1)>0?Math.floor(s/t*-1):0,f=h;f<c+h+1;f++)for(var d=u;d<l+u+1;d++)if(e.map[f]&&e.map[f][d]){var m=e.map[f][d];m.update(),m.draw()}e.cfg.updateAll=!1}else if(r.length>0){for(var y=0;y<r.length;y++)e.map[r[y].y][r[y].x].draw(e);e.cfg.updateArr=[]}a.restore()}}},{key:"listen",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.addEventListener(t,e,!1)})}},{key:"mute",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.removeEventListener(t,e,!1)})}},{key:"handleEvent",value:function(e){var t="on"+e.type;if("function"==typeof this[t])return e.preventDefault(),this[t](e)}},{key:"onmousedown",value:function(e){var t=this.game;if(t.playing[0]){switch(e.button){case 0:t.mouse.click="left",t.mouse.left=!0;break;case 1:t.mouse.click="middle",t.mouse.middle={click:!0,x:t.mouse.x,y:t.mouse.y};break;case 2:t.mouse.click="right",t.mouse.right=!0}this.checkForClicks()}}},{key:"onmouseup",value:function(e){var t=this.game;if(t.playing[0])switch(t.mouse.click=null,e.button){case 0:t.mouse.left=!1;break;case 1:t.mouse.middle={click:!1,x:null,y:null};break;case 2:t.mouse.right=!1}}},{key:"onwheel",value:function(e){var t=this.game;if(e.preventDefault(),t.playing[0]){var i=t.mouse,n=t.translate.x,s=t.translate.y,a=t.cfg.scale,o=e.wheelDelta>0?4:-4;8<=a+o&&a+o<=96&&(t.translate.x=i.x-(i.x-n)/a*(a+o),t.translate.y=i.y-(i.y-s)/a*(a+o),t.cfg.scale+=o,t.cfg.updateAll=!0)}}},{key:"onmousemove",value:function(e){var t=this.game;if(t.playing[0]){var i=t.mouse,n=t.cfg.scale,s=t.translate.x,a=t.translate.y;t.mouse.x=e.clientX,t.mouse.y=e.clientY,t.mouse.gridX=Math.floor((i.x-s)/n),t.mouse.gridY=Math.floor((i.y-a)/n),(i.left||i.right||i.middle.click)&&(i.middle.click&&this.checkForClicks(),i.gridX===i.last.gridX&&i.gridY===i.last.gridY&&i.click===i.last.click||this.checkForClicks())}}},{key:"onmouseleave",value:function(e){var t=this.game;t.playing[0]&&(t.mouse.left=!1,t.mouse.right=!1,t.mouse.middle={click:!1,x:null,y:null})}},{key:"ontouchstart",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchmove",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchend",value:function(e){this.game}}]),e}();l.prototype.checkForClicks=function(){var e=this.game,t=e.mouse.gridX,i=e.mouse.gridY,n=e.map,s=e.mouse,a=e.cfg;if(n[i]&&(!n[i]||n[i][t])){var l=n[i][t],c=s.x,u=s.y;s.last.gridX=t,s.last.gridY=i;var h,f;if(s.right)s.last.click="right",n[i][t]=new this.game.Objects.Block(l.x,l.y,e),(h=a.updateArr).push.apply(h,r(o.default.getValue(e,t,i,!0,!1))),a.updateArr.push({x:t,y:i});s.left&&(s.last.click="left",(!l.tile||l.tile&&e.assets.tiles[l.tile.name]!=e.select.tile.name)&&(n[i][t]=new e.select.block(l.x,l.y,e),(f=a.updateArr).push.apply(f,r(o.default.getValue(e,t,i,!1,!1))),a.updateArr.push({x:t,y:i}))),s.middle.click&&(s.last.click="middle",e.translate.x+=c-s.middle.x,e.translate.y+=u-s.middle.y,s.middle.x=c,s.middle.y=u,a.updateAll=!0)}},e.exports=l},"./src/update/play.js":function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.list="ontouchstart"in window?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup","keyup","keydown"]}return n(e,[{key:"update",value:function(){var e=this.game;if(e.playing[1]){e.Camera();var t=e.cfg.scale,i=e.canvas,n=e.translate.x,s=e.translate.y,a=e.Player,o=e.Engine,r=e.map,l=e.c,c=e.cfg,u=c.cols*c.scale,h=c.rows*c.scale,f=u>h,d=f?u:u/1080*1920,m=f?h/1920*1080:h,y=new Image(u,h);y.src="https://cdn.glitch.com/e683167b-6e53-40d8-9a05-e24a714a856d%2Fspace-background.svg?1551610099211",o.create(c.rows,c.cols,t),l.clearRect(0,0,i.width,i.height),l.beginPath(),l.drawImage(y,n,s,d,m),l.closePath(),l.save(),l.translate(n,s);for(var g=Math.ceil(i.width/t),p=Math.ceil(i.height/t),v=Math.floor(n/t*-1)>0?Math.floor(n/t*-1):0,k=Math.floor(s/t*-1)>0?Math.floor(s/t*-1):0,w=k;w<p+k+1;w++)for(var b=v;b<g+v+1;b++)if(r[w]&&(!r[w]||r[w][b])){var x=r[w][b];x.empty||(x.update(),x.draw(),x.collision&&o.insert(x))}a.isDead||a.actions(),o.insert(a),o.checkCells(),a.update(),l.restore()}}},{key:"listen",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.addEventListener(t,e,!1)}),console.log("start")}},{key:"mute",value:function(){var e=this;this.list.forEach(function(t){return e.game.canvas.removeEventListener(t,e,!1)}),console.log("end")}},{key:"handleEvent",value:function(e){var t="on"+e.type;if("function"==typeof this[t])return e.preventDefault(),this[t](e)}},{key:"onkeydown",value:function(e){var t=this.game;e.preventDefault(),t.playing[0]&&t.Player.keys.hasOwnProperty(e.key)&&(t.Player.keys[e.key]=!0)}},{key:"onkeyup",value:function(e){var t=this.game;e.preventDefault(),t.playing[0]&&t.Player.keys.hasOwnProperty(e.key)&&(t.Player.keys[e.key]=!1)}},{key:"onmousedown",value:function(e){}},{key:"onmouseup",value:function(e){}},{key:"onmousemove",value:function(e){}},{key:"onmouseleave",value:function(e){var t=this.game;t.playing[0]&&(t.mouse.left=!1,t.mouse.right=!1,t.mouse.middle={click:!1,x:null,y:null})}},{key:"ontouchstart",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchmove",value:function(e){this.game,e.targetTouches.item(0)}},{key:"ontouchend",value:function(e){this.game}}]),e}()},"./src/utils.js":function(e,t,i){"use strict";e.exports=function(e){var t=this;this.game=e,this.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},this.loadTiles=function(e){var t=new Image;t.src=e.url,t.addEventListener("load",function(){e.img=t,console.log(e.name,"loaded.")},!1)},this.lerp=function(e,t,i){if(0===e)return!1;i=(i=i<0?0:i)>1?1:i;var n=Number((e+(t-e)*i).toFixed(2));return n.toFixed(0)!=t?n:t},this.getBlock=function(e,t,i){return!!e[i]&&(!(e[i]&&!e[i][t])&&!!e[i][t].collision)},this.events=function(e,t){console.log("evenThis",e),e.listen=function(){t.forEach(function(t){return e.game.canvas.addEventListener(t,e,!1)})},e.mute=function(){t.forEach(function(t){return e.game.canvas.removeEventListener(t,e,!1)})},e.handleEvent=function(t){var i="on"+t.type;if("function"==typeof e[i])return t.preventDefault(),e[i](t)}},this.textSize=function(e,t){return[e.measureText(t).width,.7*parseInt(e.font.match(/\d+/),10)]},this.mouseCollision=function(e,t){var i=e.x,n=i+e.w,s=e.y,a=s+e.h,o=t.x,r=t.y;return i<=o&&n>=o&&s<=r&&a>=r},this.catchBlockCollision=function(e,i){return!!t.game.map[i]&&(!!t.game.map[i][e]&&!!t.game.map[i][e].collision)},this.numberToClass=function(e){switch(e){case 0:return t.game.Objects.Block;case 1:return t.game.Objects.Wall;case 2:return t.game.Objects.BouncingBox;case 3:return t.game.Objects.Spike}}}}});